<!DOCTYPE html>
<html>
<head>
<title>Flappy Smiley Soft Gravity</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #70c5ce;
        font-family: Arial, sans-serif;
    }
</style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Bird
let birdX = 80;
let birdY = 200;
let velocity = 0;
let gravity = 0.20;     // ★ really soft gravity
let jumpForce = -5.7;   // ★ gentle jump

// Pipes
let pipes = [];
let pipeGap = 190;
let pipeWidth = 60;
let pipeSpeed = 2;

// Score
let score = 0;

// Setup first pipe
function makePipe() {
    const topHeight = Math.random() * 250 + 50;
    pipes.push({
        x: canvas.width,
        top: topHeight,
        bottom: topHeight + pipeGap
    });
}

makePipe();
setInterval(() => makePipe(), 2000);

// Input
document.addEventListener("keydown", (e) => {
    if (e.code === "Space") velocity = jumpForce;
});
document.addEventListener("mousedown", () => velocity = jumpForce);

// Game loop
function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Bird physics
    velocity += gravity;
    birdY += velocity;

    // Draw bird (smiley)
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    ctx.arc(birdX, birdY, 20, 0, Math.PI * 2);
    ctx.fill();

    // Eyes
    ctx.fillStyle = "black";
    ctx.beginPath(); ctx.arc(birdX - 7, birdY - 5, 3, 0, Math.PI * 2); ctx.fill();
    ctx.beginPath(); ctx.arc(birdX + 7, birdY - 5, 3, 0, Math.PI * 2); ctx.fill();

    // Smile
    ctx.beginPath();
    ctx.arc(birdX, birdY + 2, 10, 0, Math.PI);
    ctx.stroke();

    // Pipes
    ctx.fillStyle = "green";
    for (let p of pipes) {
        p.x -= pipeSpeed;

        // Top pipe
        ctx.fillRect(p.x, 0, pipeWidth, p.top);
        // Bottom pipe
        ctx.fillRect(p.x, p.bottom, pipeWidth, canvas.height - p.bottom);

        // Score
        if (p.x + pipeWidth === birdX) score++;

        // Collision
        if (
            birdX + 20 > p.x && birdX - 20 < p.x + pipeWidth &&
            (birdY - 20 < p.top || birdY + 20 > p.bottom)
        ) {
            alert("Game Over! Score: " + score);
            document.location.reload();
        }
    }

    // Hit ground or ceiling
    if (birdY > canvas.height || birdY < 0) {
        alert("Game Over! Score: " + score);
        document.location.reload();
    }

    // Score display
    ctx.fillStyle = "white";
    ctx.font = "30px Arial";
    ctx.fillText("Score: " + score, 10, 40);

    requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
